<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Rohit&#39;s Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Rohit&#39;s Blog Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Rohit&#39;s Blog JSON Feed">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-rh="true">Interrupts | Rohit&#x27;s Blog</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://s4dr0t1.github.io/img/opengraph.png"><meta data-rh="true" name="twitter:image" content="https://s4dr0t1.github.io/img/opengraph.png"><meta data-rh="true" property="og:url" content="https://s4dr0t1.github.io/docs/os/Kernel/interrupts"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Interrupts | Rohit&#x27;s Blog"><meta data-rh="true" name="description" content="Getting attention of the microprocessor, the what, why and how?"><meta data-rh="true" property="og:description" content="Getting attention of the microprocessor, the what, why and how?"><link data-rh="true" rel="icon" href="/img/logo.png"><link data-rh="true" rel="canonical" href="https://s4dr0t1.github.io/docs/os/Kernel/interrupts"><link data-rh="true" rel="alternate" href="https://s4dr0t1.github.io/docs/os/Kernel/interrupts" hreflang="en"><link data-rh="true" rel="alternate" href="https://s4dr0t1.github.io/docs/os/Kernel/interrupts" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.4612e351.css">
<link rel="preload" href="/assets/js/runtime~main.b55d8945.js" as="script">
<link rel="preload" href="/assets/js/main.8c95a7e4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_aKYr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="aHR0cHM6Ly94a2NkLmNvbS8yMTc2Lwo=" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.png" alt="aHR0cHM6Ly94a2NkLmNvbS8yMTc2Lwo=" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">s4dr0t1</b></a><a class="navbar__item navbar__link" href="/blog">Blog</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">My Infosec Ramblings</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/projects">Projects</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/#about">About</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y sidebarWithHideableNavbar_FoYL"><a tabindex="-1" class="sidebarLogo_FJUI" target="_self" href="/"><img src="/img/logo.png" alt="aHR0cHM6Ly94a2NkLmNvbS8yMTc2Lwo=" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.png" alt="aHR0cHM6Ly94a2NkLmNvbS8yMTc2Lwo=" class="themedImage_W2Cr themedImage--dark_oUvU"><b>s4dr0t1</b></a><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/cryptography/crypto101">Cryptography</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/os/os-basics">Operating System</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/os/os-basics">Basics</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/os/Kernel/kernel-basics">Kernel</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/os/Kernel/kernel-basics">Basics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/os/Kernel/protection-rings">Protection Rings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/os/Kernel/interrupts">Interrupts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/os/Kernel/syscalls">System Calls</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/programming/pl-basics">Programming</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_cwdi"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_xORG"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">üè†</a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">Operating System</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">Kernel</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/docs/os/Kernel/interrupts">Interrupts</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Interrupts</h1></header><blockquote><p>Getting attention of the microprocessor, the what, why and how?</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="basics">Basics<a class="hash-link" href="#basics" title="Direct link to heading">‚Äã</a></h2><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Ever wonder whenever we type something on the keyboard, the keypress is <em>almost</em> immediately registered and shown in front of the screen? </p><p>The magic is done through interrupts (and some other things such as device drivers, I/O controllers which are out of scope of this current post, and will be covered later)</p></div></div><p>An interrupt is a signal which can be sent to the microprocessor either via hardware or software components, to let it know that there is an urgent event which needs <strong>immediate</strong> attention.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="how-the-microprocessor-comes-to-know-about-an-interrupt">How the microprocessor comes to know about an interrupt?<a class="hash-link" href="#how-the-microprocessor-comes-to-know-about-an-interrupt" title="Direct link to heading">‚Äã</a></h2><p>The microprocessor senses Interrupts after executing an instruction, with the help of <em>Interrupt Request Lines</em>. As and when, there is a signal present on the IRL, the microprocessor decides accordingly whether to handle (<em>service</em>) it or not.</p><p>In modern hardware, there is suppose for multi-priority interrupts to differ b/w low priority and high priority interrupts, which is facilitated by multiple request lines:</p><ul><li><strong>Non-maskable interrupt lines</strong>: Reserved for extremely fatal and sensitive situations such as memory loss, traps etc</li><li><strong>Maskable interrupt lines</strong>: Reserved for generic use cases such as system calls, and this line can be turned off by the CPU before executing critical instructions</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="how-are-interrupts-handled">How are interrupts handled?<a class="hash-link" href="#how-are-interrupts-handled" title="Direct link to heading">‚Äã</a></h2><p>Whenever the microprocessor senses an interrupt through the Interrupt Request Lines, it must decide whether it must be serviced or not based on the priority. Traps on the other hand, are non-maskable and must be handled by the microprocessor as and when they occur.</p><p>The microprocessor saves the current execution context of whatever is being executed (we&#x27;ll learn more about process context and Process Control Block later) and jumps <code>jmp</code> to a specific area in the memory to a subroutine which can handle the interrupt known as <strong>ISR</strong> (Interrupt Service Routines or Interrupt Handlers). The said can be achieved via many ways: </p><table><thead><tr><th>Interrupt mechanism</th><th>Description</th></tr></thead><tbody><tr><td>Generic Interrupt Handling</td><td><li>On every interrupt, the execution flow is redirected to a pre-defined area in memory, which is the starting address of the generic ISR</li><li>The generic ISR then inspects the registers, probes the buses and obtains other information, to find which device needs servicing.</li><li>The generic ISR then, calls the device specific interrupt handler to service the interrupt</li><li>The downside of this methodology is that interrupts must be handled very fast. If the number of devices is too large, generic interrupt handling becomes a problem because the generic ISR would then have to probe through a lot of devices to find which device needs servicing</li></td></tr><tr><td>Interrupt Vector Table (IVT) mechanism</td><td><li>The solution to the aforementioned problem in the previous section, is to not jump to a generic ISR, and instead directly jump to the ISR which can service the interrupt, completely bypassing the generic interrupt handling stage</li> <li>This is facilitated by having a special array known as Interrupt Vector Table (IVT), which stores pointers to base addresses of different interrupt handlers</li><li>When an device issues an interrupt, it stores the Interrupt Number into a specific registers, which is then read and is used as an index into the array to find the address of the ISR</li><li>The <code>IDTR</code> register is used to store the base address of the Interrupt Descriptor Table (IDT)/ Interrupt Vector Table (IVT)</li><li>The base addresses of interrupts handlers for different devices gets known at the boot time, by the OS, by probing the hardware buses and determining which devices are present</li></td></tr><tr><td>Interrupt Chaining</td><td><li>The purpose of vectored interrupt mechanism is to save time which gets wasted in looking for which devices that need servicing, and the ISR address, but the vector table is fixed in size and can only store only a limited pointers, a combination of basic and IVT mechanism must be used in modern hardware to <em>really</em> facilitate interrupts, and this technique is known as <strong>Interrupt Chaining</strong></li><li>In interrupt chaining, some indexes to the array contain pointers to specific ISRs, and some containing chained interrupt handlers viz. it points to the base address of a list, containing many ISR addresses.</li><li>When an interrupt is raised, the ISRs are called one by one until one is found which can service the interrupt</li><li>This technique is a compromise b/w overhead of a large Interrupt Vector Table and the inefficiency of generic interrupt handling</li></td></tr></tbody></table><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Multi-level Interrupt Handling</h5></div><div class="admonition-content"><p>Nowadays, modern systems split the interrupt handling stage into multiple parts</p><ul><li><strong>FLIH</strong> (First Level Interrupt Handler): Deals with saving the information of the currently executing process and context switching</li><li><strong>SLIH</strong> (Second Level Interrupt Handler): Deals with actually servicing the interrupt</li></ul></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="what-happens-after-an-interrupt">What happens after an interrupt<a class="hash-link" href="#what-happens-after-an-interrupt" title="Direct link to heading">‚Äã</a></h2><p>Once the event related to the interrupt signal is handled, the suspended process is then resumed.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="different-categorization-of-interrupts">Different categorization of interrupts<a class="hash-link" href="#different-categorization-of-interrupts" title="Direct link to heading">‚Äã</a></h2><table><thead><tr><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>Vectored and non-vectored</td><td><li><strong>Vectored Interrupts</strong>: The address of the ISR is hard-wired and there‚Äôs no need to tell the microprocessor about it</li><li><strong>Non-vectored Interrupts</strong>: Address of the ISR needs to be communicated to the microprocessor.</li></td></tr><tr><td>Software and hardware interrupts</td><td><li><strong>Software Interrupts</strong>: Invoked by a software component for purposes such as system calls on older processors</li><li><strong>Hardware interrupts</strong>: Invoked by a hardware component and is used as a way for an I/O device to communicate with the microprocessor. </li></td></tr><tr><td>Maskable and Non-maskable Interrupts</td><td><li><strong>Maskable Interrupts</strong>: These signals are sent over maskable IRLs and can be ignored by the microprocessor if need be, as they&#x27;re mostly low priority interrupts</li><li><strong>Non-maskable Interrupts</strong>: They are extremely important and can&#x27;t be ignored by the microprocessor, such as Trap. They&#x27;re very high priority interrupts</li></td></tr></tbody></table></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/os/Kernel/protection-rings"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Understanding protection rings offered by x86 family of CPUs</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/os/Kernel/syscalls"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">How does usermode applications perform privileged operations</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#basics" class="table-of-contents__link toc-highlight">Basics</a></li><li><a href="#how-the-microprocessor-comes-to-know-about-an-interrupt" class="table-of-contents__link toc-highlight">How the microprocessor comes to know about an interrupt?</a></li><li><a href="#how-are-interrupts-handled" class="table-of-contents__link toc-highlight">How are interrupts handled?</a></li><li><a href="#what-happens-after-an-interrupt" class="table-of-contents__link toc-highlight">What happens after an interrupt</a></li><li><a href="#different-categorization-of-interrupts" class="table-of-contents__link toc-highlight">Different categorization of interrupts</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Connect</div><ul class="footer__items"><li class="footer__item"><a href="https://www.linkedin.com/in/rohitdhill/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/s4dr0t1" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/s4dr0t1" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://keybase.io/s4dr0t1" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Keybase<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://news.ycombinator.com/submitted?id=s4dr0t1" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>HackerNews<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.reddit.com/user/s4dr0t1" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Reddit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://keybase.io/s4dr0t1" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Keybase<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/docs">My Infosec Ramblings</a></li><li class="footer__item"><a class="footer__link-item" href="/projects">Projects</a></li><li class="footer__item"><a class="footer__link-item" href="/#about">About</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Last updated on Tue Aug 16 2022 | Inspired by kayo-folio</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b55d8945.js"></script>
<script src="/assets/js/main.8c95a7e4.js"></script>
</body>
</html>