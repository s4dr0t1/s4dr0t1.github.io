"use strict";(self.webpackChunkrohitdhill_me=self.webpackChunkrohitdhill_me||[]).push([[459],{4137:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return m}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=c(n),m=i,g=u["".concat(l,".").concat(m)]||u[m]||p[m]||a;return n?r.createElement(g,o(o({ref:t},d),{},{components:n})):r.createElement(g,o({ref:t},d))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var c=2;c<a;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},132:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},assets:function(){return d},toc:function(){return p},default:function(){return m}});var r=n(7462),i=n(3366),a=(n(7294),n(4137)),o=["components"],s={title:"Protection Rings",id:"protection-rings",pagination_label:"Understanding protection rings offered by x86 family of CPUs",sidebar_label:"Protection Rings"},l=void 0,c={unversionedId:"os/Kernel/protection-rings",id:"os/Kernel/protection-rings",title:"Protection Rings",description:"What are protection rings? Understanding User-mode and Kernel-mode.",source:"@site/docs/os/2. Kernel/02. Protection Rings.md",sourceDirName:"os/2. Kernel",slug:"/os/Kernel/protection-rings",permalink:"/docs/os/Kernel/protection-rings",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Protection Rings",id:"protection-rings",pagination_label:"Understanding protection rings offered by x86 family of CPUs",sidebar_label:"Protection Rings"},sidebar:"tutorialSidebar",previous:{title:"Understanding basics of the Kernel",permalink:"/docs/os/Kernel/kernel-basics"},next:{title:"Understanding interrupts",permalink:"/docs/os/Kernel/interrupts"}},d={},p=[{value:"Protection Rings",id:"protection-rings",level:3}],u={toc:p};function m(e){var t=e.components,s=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,r.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"What are protection rings? Understanding User-mode and Kernel-mode.")),(0,a.kt)("h3",{id:"protection-rings"},"Protection Rings"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Protection Rings are a protection-mechanism provided by the x86 family of CPUs to protect important data from faults and security risks. In layman terms, they can be defined as different privilege levels in which code can execute."),(0,a.kt)("li",{parentName:"ul"},"These protection-mechanisms are hardware enforced by the CPU, and they provide different CPU modes at the firmware level in which execution can take place"),(0,a.kt)("li",{parentName:"ul"},"Rings are arranged in hierarchy from most privileged (most trusted, numbered zero), to least privileged (least trusted, usually with the highest ring number)."),(0,a.kt)("li",{parentName:"ul"},"Special mechanisms are there to allow an outer ring to interact with higher privileged rings, and they can't just do it arbitrarily. This access control prevents programs from one ring from misusing resources")),(0,a.kt)("p",null,(0,a.kt)("img",{loading:"lazy",alt:"Protection Rings in x86 CPUs",src:n(1667).Z,width:"675",height:"487"})),(0,a.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"What happens when a less privileged program tries to execute privileged instructions")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"If something running in a less-privileged execution mode tries executing privileged instructions, the hardware traps to the OS which is done by redirecting the execution flow through the IVT and the IVT pointing to the OS, once execution flow transfers to the OS, the OS kills the program."))),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Protection Rings"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Ring 0"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("li",null,"In Ring 0, the executing code has complete and unrestricted access to underlying hardware and it can do anyone it desires, such as execute any CPU instruction, reference any memory address directly.")," ",(0,a.kt)("li",null,"This level is reserved for lowest, most trusted functions of the OS.")," ",(0,a.kt)("li",null,"Since the Kernel runs at this privilege level, we often refer to it as ",(0,a.kt)("strong",{parentName:"td"},"Kernel-Mode"),"."))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Ring 3"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("li",null,"Code running at the Ring 3 privilege level, has no ability to perform privileged operations, and they delegate to system APIs to perform privileged operations.")," ",(0,a.kt)("li",null,"Most of the code running in our computer, executes in Ring 3, which is why its known as ",(0,a.kt)("strong",{parentName:"td"},"User-Mode"),". "))))),(0,a.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Negative Rings")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"There are negative-rings too, but we will not be discussing about that. If you want to understand them, read about HyperVisors and other such concepts. I suggest you check out this ",(0,a.kt)("a",{parentName:"p",href:"https://www.virtuatopia.com/index.php?title=An_Overview_of_Virtualization_Techniques"},"link")),(0,a.kt)("ul",{parentName:"div"},(0,a.kt)("li",{parentName:"ul"},"Ring -1 is Hypervisor Mode"),(0,a.kt)("li",{parentName:"ul"},"Ring -2 is System Management Mode"),(0,a.kt)("li",{parentName:"ul"},'There exists a Ring -3 too. Try searching about "Ring -3 Rootkits"')))))}m.isMDXComponent=!0},1667:function(e,t,n){t.Z=n.p+"assets/images/rings-8f97d0354d14053ffed3fe079528b706.png"}}]);